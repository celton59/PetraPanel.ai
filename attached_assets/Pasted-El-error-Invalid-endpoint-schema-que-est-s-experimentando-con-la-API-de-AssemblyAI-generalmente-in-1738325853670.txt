El error "Invalid endpoint schema" que estás experimentando con la API de AssemblyAI generalmente indica un problema en la configuración de la solicitud a la API. Basándome en el mensaje de error y la información proporcionada, aquí hay algunas posibles causas y soluciones:
Posibles causas y soluciones
Configuración incorrecta del cliente API
Asegúrate de que estás inicializando correctamente el cliente de AssemblyAI.
Verifica que estás usando la última versión del SDK de AssemblyAI.
URL de audio inválida o inaccesible
Comprueba que la URL del archivo de audio que estás intentando transcribir sea válida y accesible públicamente.
Parámetros de transcripción mal formados
Revisa la estructura de los parámetros que estás pasando en la solicitud de transcripción.
API Key incorrecta o no configurada
Verifica que estás usando una API Key válida y que está correctamente configurada en tu aplicación.
Pasos para solucionar
Actualiza el SDK de AssemblyAI
Ejecuta el siguiente comando para asegurarte de tener la última versión:
bash
npm install assemblyai@latest
Verifica la inicialización del cliente
Asegúrate de que estás inicializando el cliente de AssemblyAI correctamente:
typescript
import { AssemblyAI } from 'assemblyai';

const client = new AssemblyAI({
  apiKey: process.env.ASSEMBLYAI_API_KEY
});
Revisa la estructura de la solicitud de transcripción
Asegúrate de que la solicitud de transcripción tenga la estructura correcta:
typescript
const transcript = await client.transcripts.create({
  audio_url: "URL_DE_TU_AUDIO",
  speaker_labels: true,
  language_code: "es" // si es necesario
});
Habilita el logging detallado
Activa el logging detallado para obtener más información sobre el error:
typescript
import { setLogLevel } from 'assemblyai';
setLogLevel('debug');
Verifica la API Key
Asegúrate de que tu API Key sea válida y esté correctamente configurada en las variables de entorno.
Comprueba la accesibilidad del archivo de audio
Si estás usando una URL para el archivo de audio, asegúrate de que sea accesible públicamente.
Si después de intentar estas soluciones el problema persiste, te recomiendo:
Revisar la documentación oficial de AssemblyAI para asegurarte de que estás siguiendo las últimas prácticas recomendadas.
Contactar al soporte de AssemblyAI para obtener ayuda específica, proporcionándoles los detalles del error y los pasos que has intentado para resolverlo.
Recuerda que los errores específicos de la API pueden requerir una revisión más detallada de tu código y configuración.
